{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>{% block title %}Shrimati{% endblock title %}</title>

  <!-- Favicons -->
  <link href="{% static 'assets/img/favicon.png' %}" rel="icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Vendor CSS -->
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

  <!-- Main CSS -->
  <link href="{% static 'assets/css/main.css' %}" rel="stylesheet">

  {% block extra_css %}{% endblock %}

<style>
  /* Scroll Top Button */
#scroll-top {
  position: fixed;
  right: 20px;
  bottom: 20px;
  background: #0d6efd;
  color: white;
  width: 45px;
  height: 45px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 28px;
  cursor: pointer;
  opacity: 0;
  visibility: hidden;
  transition: 0.3s ease-in-out;
  z-index: 9999;
}

#scroll-top.show {
  opacity: 1;
  visibility: visible;
}


/* ------------------------------------------------------
   HEADER â€” Dark Blue + White Text
------------------------------------------------------ */
#header {
  background: #0a2342 !important;
  color: white !important;
  padding: 15px 0;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  z-index: 9999;
}

.header-logo {
  display: flex;
  align-items: center;
  gap: 10px;
}

.header-logo img {
  height: 40px;
  width: auto;
}

.header-logo h1 {
  color: white !important;
  font-weight: 700;
  margin: 0;
}

.mobile-nav-toggle {
  color: white !important;
}

/* Cart icon */
#header .bi-cart {
  color: white !important;
}

#cart-count {
  color: white;
  font-weight: bold;
}

/* ------------------------------------------------------
   MOBILE NAV DRAWER
------------------------------------------------------ */
#navmenu {
  position: fixed;
  top: 0;
  right: -100%;
  width: 75%;
  height: 100%;
  background: #111;
  padding: 40px 20px;
  transition: right .3s ease;
  z-index: 999;
}

#navmenu ul {
  flex-direction: column;
  gap: 20px;
  list-style: none;
  padding: 0;
}

#navmenu.navmenu-active { right: 0; }

body.nav-open::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  z-index: 998;
}

/* Desktop Navigation */
@media (min-width: 1200px) {
  #navmenu {
    position: static;
    width: auto;
    height: auto;
    padding: 0;
    background: transparent;
  }
  #navmenu ul {
    flex-direction: row;
    gap: 15px;
  }
  .mobile-nav-toggle { display: none; }
}

/* ------------------------------------------------------
   MOBILE SIDEBAR MENU
------------------------------------------------------ */
.side-menu {
  position: fixed;
  left: -280px;
  top: 0;
  width: 280px;
  height: 100%;
  background: #ffffff;
  box-shadow: 0 0 20px rgba(0,0,0,0.2);
  z-index: 10000;
  padding: 20px;
  transition: 0.3s ease;
}

.side-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #eee;
  padding-bottom: 10px;
}

.close-btn {
  cursor: pointer;
  font-size: 24px;
}

.side-links {
  list-style: none;
  margin-top: 20px;
  padding: 0;
}

.side-links li {
  padding: 13px 0;
  font-size: 18px;
  border-bottom: 1px solid #f1f1f1;
}

.dropdown-box { display: none; margin-left: 10px; }
.dropdown-toggle { cursor: pointer; font-weight: 500; }

.overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
  display: none;
  z-index: 9998;
}

/* ------------------------------------------------------
   MOBILE SEARCH
------------------------------------------------------ */
.mobile-search { display: none; }
@media (max-width: 768px) { .mobile-search { display: block; } }

.search-input { border-radius: 20px; padding-left: 15px; }

</style>

</head>

<body class="index-page">

<!-- -----------------------------------------------------
     HEADER
------------------------------------------------------ -->
<header id="header" class="header d-flex align-items-center fixed-top">
  <div class="container-fluid container-xl d-flex align-items-center justify-content-between">
  <nav id="navmenu" class="d-flex align-items-center">
  {% if user.is_authenticated %}
    <div class="d-flex align-items-center me-3">
      <div class="dropdown">
        <a class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" href="#" id="navProfile" data-bs-toggle="dropdown" aria-expanded="false">
          {% if user.profile.profile_picture %}
            <img src="{{ user.profile.profile_picture.url }}" alt="Avatar" class="rounded-circle" style="width:36px;height:36px;object-fit:cover;margin-right:8px;">
          {% else %}
          <i class="bi bi-person-circle text-white" style="font-size:36px;margin-right:8px;"></i>
            <img src="{% static 'assets/img/default-avatar.png' %}" alt="Avatar" class="rounded-circle" style="width:36px;height:36px;object-fit:cover;margin-right:8px;">
          {% endif %}
          <span class="d-none d-xl-inline">{{ user.get_full_name|default:user.username }}</span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navProfile">
          <li><a class="dropdown-item" href="{% url 'profile' %}">My Profile</a></li>
          <li><a class="dropdown-item" href="{% url 'orders' %}">Orders</a></li>
          <li><a class="dropdown-item" href="{% url 'checkout' %}">Checkout</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>
        </ul>
      </div>
    </div>
  {% else %}
    <div class="d-flex align-items-center me-3">
      <a class="btn btn-outline-light btn-sm me-2 d-none d-xl-inline" href="{% url 'login' %}">Login</a>
      <a class="btn btn-light btn-sm d-none d-xl-inline" href="{% url 'signup' %}">Sign Up</a>
      <a class="nav-link d-xl-none text-white" href="{% url 'login' %}" title="Account"><i class="bi bi-person" style="font-size:1.25rem;"></i></a>
    </div>
  {% endif %}
    <ul class="d-flex align-items-center mb-0">
      <li><a class="nav-link" href="/">Home</a></li>
      <li><a class="nav-link" href="/about/">About</a></li>
      <li><a class="nav-link" href="/orders/">Orders</a></li>
      <li><a class="nav-link" href="/blog/">Blog</a></li>
      <li><a class="nav-link" href="/contact/">Contact</a></li>

      <li class="dropdown d-none d-xl-block ms-2">
        <a class="nav-link dropdown-toggle" href="#" id="accountDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          Account
        </a>
        <ul class="dropdown-menu" aria-labelledby="accountDropdown">
          <li><a class="dropdown-item" href="{% url 'signup' %}">Sign Up</a></li>
          <li><a class="dropdown-item" href="{% url 'login' %}">Login</a></li>
          <li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>
        </ul>
      </li>
    </ul>
  </nav>

  <!-- Desktop search (visible md and up) -->
  <form action="{% url 'search' %}" method="get" class="d-none d-md-flex align-items-center ms-3" style="width:420px;">
    <div class="input-group w-100">
      <input type="text" name="q" class="form-control search-input" placeholder="Search products..." value="{{ request.GET.q|default:'' }}">
      <button class="btn btn-danger" type="submit"><i class="bi bi-search"></i></button>
    </div>
  </form>
    <!-- LEFT: LOGO IMAGE + TEXT -->
    <a href="/" class="header-logo">
      <h1>SHRIMATI</h1>
    </a>

    <!-- MOBILE MENU ICON -->
    <i class="bi bi-list mobile-nav-toggle d-xl-none" style="font-size: 30px;" onclick="openSidebar()"></i>

    <!-- RIGHT: CART -->
    <a href="{% url 'checkout' %}" class="navlink bg-danger text-white p-3 rounded position-relative">
      <i class="bi bi-cart" style="font-size: 1.6rem;"></i>
      <span id="cart-count">{{ cart_count|default:"0" }}</span>
    </a>
 <!-- ðŸš— PathRider Loading Screen -->
<div id="start-loader">
    <div class="loader-box">
        <div class="road"></div>
        <div class="car"></div>
        <p>Starting PathRiderâ€¦</p>
    </div>
</div>

<style>
    /* Fullscreen Layer */
    #start-loader {
        position: fixed;
        inset: 0;
        background: #481e1eff;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 999999;
        transition: opacity .6s ease;
    }

    .loader-box {
        position: relative;
        text-align: center;
    }

    /* Road */
    .road {
        width: 180px;
        height: 6px;
        background: #cccccc;
        border-radius: 3px;
        margin: 0 auto;
        overflow: hidden;
        position: relative;
    }

    .road::before {
        content: "";
        position: absolute;
        inset: 0;
        background: repeating-linear-gradient(
            to right,
            #ffffff 0 20px,
            #000000 20px 40px
        );
        animation: moveRoad 1s linear infinite;
    }

    /* Car Body */
    .car {
        width: 60px;
        height: 30px;
        background: #1b73e8;
        border-radius: 5px;
        position: absolute;
        top: -35px;
        left: 0;
        animation: drive 1.5s infinite ease-in-out;
    }

    /* Wheels */
    .car::before,
    .car::after {
        content: "";
        position: absolute;
        width: 14px;
        height: 14px;
        background: #000;
        border-radius: 50%;
        bottom: -8px;
        animation: wheel 0.4s linear infinite;
    }

    .car::before { left: 5px; }
    .car::after  { right: 5px; }

    /* Text */
    #start-loader p {
        margin-top: 60px;
        font-size: 18px;
        font-weight: 600;
        color: #ede7e7ff;
    }

    /* Animations */
    @keyframes moveRoad {
        from { transform: translateX(0); }
        to   { transform: translateX(-40px); }
    }

    @keyframes wheel {
        from { transform: rotate(0); }
        to   { transform: rotate(360deg); }
    }

    @keyframes drive {
        0%   { left: 0px; }
        50%  { left: 120px; }
        100% { left: 0px; }
    }
</style>

<script>
    // Force loader to stay 5 seconds
    window.addEventListener("load", function () {
        setTimeout(() => {
            const loader = document.getElementById("start-loader");
            loader.style.opacity = "0";
            setTimeout(() => loader.style.display = "none", 500);
        }, 3000); 
    });
</script>



  </div>
</header>

<!-- -----------------------------------------------------
  MOBILE SIDEBAR MENU
------------------------------------------------------ -->
<div id="sideMenu" class="side-menu">
  <div class="side-header">
    <h2 class="mb-0">Menu</h2>
    <i class="bi bi-x-lg close-btn" onclick="closeSidebar()"></i>
  </div>

  <!-- Mobile search inside sidebar (visible on small screens) -->
  <div class="mobile-search d-md-none w-100 mb-3">
    <form action="{% url 'search' %}" method="get" class="d-flex">
   <input type="text" name="q" class="form-control search-input" placeholder="Search products..." value="{{ request.GET.q|default:'' }}" aria-label="Search products">
   <button class="btn btn-danger ms-2" type="submit"><i class="bi bi-search"></i></button>
    </form>
  </div>

  <ul class="side-links">
    <li><a href="/">Home</a></li>
    <li><a href="/about/">About</a></li>
    <li><a href="/orders/">Orders</a></li>
    <li><a href="/profile/">My Profile</a></li>
    <li><a href="/blog/">Blog</a></li>

    <li class="dropdown-toggle" onclick="toggleDrop('loginDrop')">
   Sign In <i class="bi bi-chevron-down float-end"></i>
    </li>

    <ul id="loginDrop" class="dropdown-box">
   <li><a href="{% url 'signup' %}">Sign Up</a></li>
   <li><a href="{% url 'login' %}">Login</a></li>
   <li><a href="{% url 'logout' %}">Logout</a></li>
    </ul>

    <li><a href="/contact/">Contact</a></li>
  </ul>
  <!--user-profile-->
  <div class="user-profile mt-4">
    {% if user.is_authenticated %}
      <div class="d-flex align-items-center gap-3 mb-3">
        {% if user.profile.profile_picture %}
          <img src="{{ user.profile.profile_picture.url }}" alt="Avatar" class="rounded-circle" style="width:64px;height:64px;object-fit:cover;">
        {% else %}
          <img src="{% static 'assets/img/default-avatar.png' %}" alt="Avatar" class="rounded-circle" style="width:64px;height:64px;object-fit:cover;">
        {% endif %}
        <div>
          <strong>{{ user.get_full_name|default:user.username }}</strong><br>
          <small class="text-muted">{{ user.email }}</small>
        </div>
      </div>

      <ul class="list-unstyled mb-0">
        <li class="mb-2"><a class="btn btn-sm btn-outline-secondary w-100" href="{% url 'profile' %}">View Profile</a></li>
        <li class="mb-2"><a class="btn btn-sm btn-outline-secondary w-100" href="{% url 'orders' %}">Orders</a></li>
        <li class="mb-2"><a class="btn btn-sm btn-danger text-white w-100" href="{% url 'checkout' %}">Checkout</a></li>
        <li><a class="btn btn-sm btn-link text-danger w-100" href="{% url 'logout' %}">Logout</a></li>
      </ul>
    {% else %}
      <div class="text-center mb-3">
        <img src="{% static 'assets/img/default-avatar.png' %}" alt="Avatar" class="rounded-circle mb-2" style="width:64px;height:64px;object-fit:cover;">
        <p class="mb-2">Welcome, guest</p>
        <div class="d-flex gap-2 justify-content-center">
          <a class="btn btn-outline-primary btn-sm" href="{% url 'login' %}">Login</a>
          <a class="btn btn-primary btn-sm" href="{% url 'signup' %}">Sign Up</a>
        </div>
      </div>
    {% endif %}
  </div>
</div>

<div id="overlay" class="overlay" onclick="closeSidebar()"></div>

<!-- -----------------------------------------------------
  MOBILE SEARCH BAR (kept for header-level mobile search)
------------------------------------------------------ -->
<div class="mobile-search d-md-none p-2 bg-light">
  <form action="{% url 'search' %}" method="get" class="d-flex">
    <input type="text" name="q" class="form-control search-input" placeholder="Search products..." value="{{ request.GET.q|default:'' }}">
    <button class="btn btn-danger ms-2" type="submit"><i class="bi bi-search"></i></button>
  </form>
</div>

<!-- -----------------------------------------------------
     HERO AREA (Mega Menu + Banner Blocks)
------------------------------------------------------ -->
<section id="hero" style="background: #eef1f4;">
  {% block mega_menu %}{% endblock %}
  {% block banner %}{% endblock %}
</section>

<!-- -----------------------------------------------------
     MAIN CONTENT
------------------------------------------------------ -->
<main id="main">
  {% block body %}{% endblock %}
</main>

<!-- -----------------------------------------------------
     FOOTER
------------------------------------------------------ -->
<footer id="footer" class="footer dark-background" style="padding: 60px 0; background: #0b001a; color: #fff;">

  <div class="container footer-top">
    <div class="row gy-4">

      <!-- Brand Section -->
      <div class="col-lg-4 col-md-6 footer-about">
        <a href="/" class="logo d-flex align-items-center">
          <h3 class="sitename text-white">Aambika</h3>
        </a>
        <p class="mt-3" style="opacity: 0.8;">
          India's most trusted platform delivering premium quality products and services with 100% customer satisfaction.
        </p>

        <div class="social-links d-flex mt-4 gap-3">
          <a href="#" class="text-white fs-5"><i class="bi bi-twitter-x"></i></a>
          <a href="#" class="text-white fs-5"><i class="bi bi-facebook"></i></a>
          <a href="#" class="text-white fs-5"><i class="bi bi-instagram"></i></a>
          <a href="#" class="text-white fs-5"><i class="bi bi-linkedin"></i></a>
        </div>
      </div>

      <!-- Useful Links -->
      <div class="col-lg-2 col-md-3 footer-links">
        <h4 class="text-white mb-3">Useful Links</h4>
        <ul>
          <li><a href="/" class="text-white-50">Home</a></li>
          <li><a href="/about/" class="text-white-50">About Us</a></li>
          <li><a href="#services" class="text-white-50">Services</a></li>
          <li><a href="/terms/" class="text-white-50">Terms of Service</a></li>
          <li><a href="/privacy/" class="text-white-50">Privacy Policy</a></li>
        </ul>
      </div>

      <!-- Services -->
      <div class="col-lg-3 col-md-3 footer-links">
        <h4 class="text-white mb-3">Our Services</h4>
        <ul>
          <li><a href="#" class="text-white-50">E-Commerce Delivery</a></li>
          <li><a href="#" class="text-white-50">Courier & Packaging</a></li>
          <li><a href="#" class="text-white-50">Bulk Orders</a></li>
          <li><a href="#" class="text-white-50">24/7 Support</a></li>
          <li><a href="#" class="text-white-50">Logistics Services</a></li>
        </ul>
      </div>

      <!-- Contact Section -->
      <div class="col-lg-3 col-md-6 footer-contact">
        <h4 class="text-white mb-3">Contact Us</h4>
        <p class="text-white-50 mb-1">City Center</p>
        <p class="text-white-50 mb-1">New Delhi, India</p>
        <p class="text-white-50"><strong>Phone:</strong> +91 9876543210</p>
        <p class="text-white-50"><strong>Email:</strong> support@aambika.com</p>
      </div>

    </div>
  </div>

  <div class="container text-center mt-4" style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
    <p class="text-white-50 mb-0">Â© 2025 <strong class="text-white">Aambika</strong>. All Rights Reserved.</p>
  </div>

</footer>


<!-- Scroll Top -->
<a href="#" id="scroll-top" class="scroll-top">
  <i class="bi bi-arrow-up-short"></i>
</a>

<!-- Preloader -->
<div id="preloader"></div>

<!-- JS -->
<script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'assets/vendor/aos/aos.js' %}"></script>
<script src="{% static 'assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
<script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js' %}"></script>
<script src="{% static 'assets/js/main.js' %}"></script>

{% block extra_js %}{% endblock %}

<script>
/* Sidebar Control */
function openSidebar() {
  document.getElementById('sideMenu').style.left = "0";
  document.getElementById('overlay').style.display = "block";
}
function closeSidebar() {
  document.getElementById('sideMenu').style.left = "-280px";
  document.getElementById('overlay').style.display = "none";
}
function toggleDrop(id) {
  const box = document.getElementById(id);
  box.style.display = box.style.display === "block" ? "none" : "block";
}
/* Scroll Top Button */
const scrollTopBtn = document.getElementById("scroll-top");
window.addEventListener("scroll", () => {
  if (window.scrollY > 300) {
    scrollTopBtn.classList.add("show");
  } else {
    scrollTopBtn.classList.remove("show");
  }
}); 
</script>

</body>
</html>
